<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debug Widget Test</title>
    <style>
      .debug {
        border: 2px solid red;
        padding: 10px;
        margin: 10px 0;
        background: #ffe6e6;
      }
      .madinah-embed {
        border: 2px dashed blue;
        min-height: 50px;
        padding: 10px;
        background: #e6f3ff;
      }
    </style>
  </head>
  <body>
    <h1>Debug Widget Test</h1>

    <div class="debug">
      <h3>Step 1: Check if container exists</h3>
      <p>This should have a blue dashed border:</p>
      <div
        class="madinah-embed"
        data-url="https://md-user-frontend-dev-ad9351cfa1ac.herokuapp.com/newcampaingtestingduplicate?widget=true&embedded=true"
        data-width="400px"
        data-height="600px"
      >
        <p>Original content - this should be replaced by iframe</p>
      </div>
    </div>

    <div class="debug">
      <h3>Step 2: Check console for errors</h3>
      <p>Open browser console (F12) to see any JavaScript errors</p>
    </div>

    <div class="debug">
      <h3>Step 3: Manual script test</h3>
      <button onclick="testScript()">Test Script Manually</button>
      <p id="result"></p>
    </div>

    <script>
      // Manual test function
      function testScript() {
        console.log("Testing script manually...");
        const containers = document.querySelectorAll(".madinah-embed");
        document.getElementById("result").innerHTML =
          `Found ${containers.length} containers`;

        containers.forEach((container, index) => {
          console.log(`Container ${index}:`, container);
          console.log("Data URL:", container.getAttribute("data-url"));
          console.log("Data Width:", container.getAttribute("data-width"));
          console.log("Data Height:", container.getAttribute("data-height"));
        });
      }

      // Log when page loads
      console.log("Page loaded, checking for containers...");
      setTimeout(() => {
        const containers = document.querySelectorAll(".madinah-embed");
        console.log(`Found ${containers.length} embed containers on page load`);
      }, 1000);
    </script>

    <!-- Load the embed script -->
    <script
      defer
      src="https://md-user-frontend-dev-ad9351cfa1ac.herokuapp.com/widget-embed.js"
    ></script>

    <script>
      // Check if script loaded
      setTimeout(() => {
        console.log("Checking if embed script loaded...");
        console.log("madinahEmbedLoaded:", window.madinahEmbedLoaded);
        console.log(
          "initMadinahWidgets function:",
          typeof window.initMadinahWidgets,
        );
      }, 2000);
    </script>
  </body>
</html>
